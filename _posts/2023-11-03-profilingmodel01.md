---
layout: single
title:  "Part 00. ì˜¨ë¼ì¸ ë©”ì‹œì§€ ì‘ì„±ì í”„ë¡œíŒŒì¼ë§ ëª¨ë¸ ê°œë°œ: ë°ì´í„°ì…‹ ê¸°ì´ˆ íƒìƒ‰"
categories: Project:Profileing_model
tag: [EDA, NLP]
---
{: .notice--primary} 
ğŸ’¡**í”„ë¡œì íŠ¸ ë°°ê²½**<br>

ê°œì¸ì •ë³´ ë³´í˜¸ì— ëŒ€í•œ ì‚¬íšŒì  ë¶„ìœ„ê¸°ì— ë”°ë¼ êµ¬ê¸€ ì¨ë“œíŒŒí‹° ì œê³µ ì¤‘ë‹¨, ì• í”Œ ì‚¬ìš©ì ì •ë³´ ê³µê°œ ì¤‘ë‹¨ ë“± ì‚¬ìš©ì ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ëŠ” ê²ƒì´ ì–´ë ¤ì›Œì§€ê³  ìˆìŒ. ìì‚¬ í”Œë«í¼ì— ê°€ì…í•œ ì‚¬ìš©ì ì™¸ ê³ ê° ë°ì´í„°ë¥¼ ì–»ëŠ” ê²ƒì€ ë”ìš± ì–´ë ¤ì›€.<br><br> 
ë§¥ë½ì •ë³´ë¥¼ í™œìš©í•œ ê³ ê° ë¶„ì„ ë° íƒ€ê²ŸíŒ… ì „ëµì— ëŒ€í•œ ê´€ì‹¬ì´ ë†’ì•„ì§€ê³  ìˆìœ¼ë‚˜ ëŒ€í‘œì ìœ¼ë¡œ ê³ ê°ì´ ìƒì‚°í•˜ëŠ” ë§¥ë½ì •ë³´ì¸ ì±„íŒ…, ë¦¬ë·°, í”¼ë“œ ë“±ìœ¼ë¡œ íŒŒì•…í•  ìˆ˜ ìˆëŠ” ì •ë³´ëŠ” ë§¤ìš° ì œí•œì ì„. íŠ¹íˆ, ì‚¬ìš©ìì˜ ì¸êµ¬í†µê³„ì  ì •ë³´ê°€ ì œê³µë˜ëŠ” ê²½ìš°ëŠ” ë§¤ìš° ë“œë¬¼ì–´ ê³ ê° ë¶„ì„ ë° íƒ€ê²ŸíŒ…ì— í™œìš©í•  ìˆ˜ ì—†ìŒ.<br><br> 
**ì±„íŒ…, ë¦¬ë·°, í”¼ë“œ ë“±ì—ì„œ ì‚¬ìš©ìì˜ ì¸êµ¬ í†µê³„ì  ì •ë³´ë¥¼ ì¶”ì •í•  ìˆ˜ ìˆë‹¤ë©´, ê³ ê° ë¶„ì„ ë° íƒ€ê²ŸíŒ…ì— í™œìš©í•  ìˆ˜ ìˆì„ ë¿ë§Œì•„ë‹ˆë¼ ì±—ë´‡/ë©”íƒ€ë²„ìŠ¤ ì„œë¹„ìŠ¤/CRM ì„œë¹„ìŠ¤ ë“±ì„ ê³ ë„í™”ì‹œí‚¬ ìˆ˜ ìˆì„ ê²ƒìœ¼ë¡œ ê¸°ëŒ€ë¨**<br><br>

{: .notice--primary} 
ğŸ¯**í”„ë¡œì íŠ¸ ëª©ì **<br>

ê³ ê°ì´ ì˜¨ë¼ì¸ ìƒì—ì„œ ìƒì‚°í•˜ëŠ” ë§¥ë½ì •ë³´(ì±„íŒ…, ë¦¬ë·°, í”¼ë“œ ë“±ì˜ í…ìŠ¤íŠ¸ ì •ë³´)ì—ì„œ ì‘ì„±ìì˜ ì¸êµ¬ í†µê³„ì  ì •ë³´(ì„±ë³„/ì—°ë ¹)ë¥¼ ì¶”ì •í•˜ëŠ” ì‘ì„±ì í”„ë¡œíŒŒì¼ë§ ëª¨ë¸ ê°œë°œ<br><br>


## ê¸°ì´ˆ íƒìƒ‰ ìš”ì•½<br>
- ì–´ë¯¸ ë³€í˜•, ë°œìŒ ê·¸ëŒ€ë¡œì˜ í‘œí˜„, ì˜¤íƒ€ ë“±ìœ¼ë¡œ ë™ì¼í•œ ì–´ê°„/ì˜ë¯¸ë¥¼ ê°–ëŠ” í‘œí˜„ì´ì§€ë§Œ ë³€í˜•ëœ í‘œí˜„ì´ ìƒë‹¹íˆ ë§ìŒ
- ììŒ ë˜ëŠ” ëª¨ìŒìœ¼ë¡œ êµ¬ì„±ëœ ë¶ˆì™„ì „í•œ í‘œí˜„, ë¬¸ì¥ê¸°í˜¸, íŠ¹ìˆ˜ê¸°í˜¸, ì´ëª¨ì§€(ì´í•˜ íŠ¹ìˆ˜í‘œí˜„)ê°€ ë©”ì‹œì§€ ëŒ€ë¶€ë¶„ì— í¬í•¨ë˜ì–´ ìˆìŒ<br>
â‡’ ì¼ë°˜ì ì¸ ë¶ˆìš©ì–´ ì œê±° ë° í‘œì œí™”ì—ì„œ ì œê±°ë˜ëŠ” í‘œí˜„<br><br>

**ì¸ì‚¬ì´íŠ¸/ê°€ì„¤**
- ë³€í˜•ëœ í‘œí˜„ ë° íŠ¹ìˆ˜í‘œí˜„ ìì²´ê°€ ì‘ì„±ìì˜ ì¸êµ¬ í†µê³„ì  íŠ¹ì„±(ì„±ë³„/ì—°ë ¹)ê³¼ ì¤‘ìš”í•œ ìƒê´€ê´€ê³„ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŒ
1. Target feature(ì„±ë³„/ì—°ë ¹)ê³¼ í‘œí˜„ì˜ ë³€í˜•/íŠ¹ìˆ˜í‘œí˜„ ê°„ì˜ ìƒê´€ê´€ê³„ íŒŒì•…ì´ í•„ìš”
   - ìƒê´€ê´€ê³„ ë¶„ì„ì„ ìœ„í•œ ë³€ìˆ˜ ê°œë°œ í•„ìš”

2. ë³€í˜•ëœ í‘œí˜„ ë° íŠ¹ìˆ˜í•œ í‘œí˜„ì´ ì œê±°ë˜ì§€ ì•Šë„ë¡ ì „ì²˜ë¦¬ ìˆ˜í–‰
<br><br>

## ë°ì´í„° ì •ë³´
- **ì¶œì²˜**: [AIHUB, í•œêµ­ì–´ SNS ë°ì´í„°ì…‹](https://www.aihub.or.kr/aihubdata/data/view.do?currMenu=115&topMenu=100&aihubDataSe=realm&dataSetSn=114)
<br><br>
- **ë°ì´í„° ì†ì„±:** í™”ì ì„±ë³„, ì—°ë ¹ëŒ€, ê±°ì£¼ì§€ì—­, ëŒ€í™” ìœ í˜•, ëŒ€í™” ì£¼ì œ, ë°œì‹  ì‹œê°„/ìˆœì„œ í¬í•¨
    - **ì¼ìƒ ëŒ€í™” 200ë§Œ ê±´**
    - **íŒŒì¼í˜•ì‹:** JSON
<br>

## ë°ì´í„° ì²˜ë¦¬
- json íŒŒì¼ì„ dataframe í˜•ì‹ìœ¼ë¡œ ë³€í™˜
- 2ì¸ ì´ìƒì˜ ëŒ€í™” ë°ì´í„°(ëŒ€í™”ë­‰ì¹˜)ì—ì„œ ë°œí™”ì idë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë©”ì‹œì§€ ë³‘í•©
- ë©”íƒ€ ë°ì´í„° ì¤‘ ì¸êµ¬í†µê³„ì  ì •ë³´ë§Œ ì¶”ì¶œ(ì„±ë³„, ì—°ë ¹, ê±°ì£¼ì§€)


```python
import pandas as pd
import json
from pprint import pprint
from glob import glob
from tqdm import tqdm

import seaborn as sns
import matplotlib
import matplotlib.pyplot as plt
```


```python
#ê²½ë¡œ ë‚´ json íŒŒì¼ ì´ë¦„ì„ ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜
file_list = glob('./í•œêµ­ì–´ SNS/Training./*.json')

file_num = 0
load_failed = []
for file in file_list:     #ë¦¬ìŠ¤íŠ¸ì˜ json íŒŒì¼ ì„ íƒ
    file_num += 1
    file_name = file.split('\\')[-1]
    print("{} ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...".format(file_name), end = '\r')
    
    
    try:     #json íŒŒì¼ ì—´ê¸°
        with open(file, 'rt', encoding = 'UTF-8') as f:
            data = json.load(f)['data']
        print("{} ë¶ˆëŸ¬ì˜¤ê¸° ì™„ë£Œ({}/{})".format(file_name, file_num, len(file_list)))

    except:     #ë©”ëª¨ë¦¬ ë¶€ì¡±ìœ¼ë¡œ íŒŒì¼ ì—´ê¸° ì‹¤íŒ¨
        load_failed.append(file_name)
        print("{} ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨: ë©”ëª¨ë¦¬ ë¶€ì¡±\n".format(file_name))
        pass
    
    else:  #ì •ìƒì ìœ¼ë¡œ íŒŒì¼ì„ ì—´ì—ˆì„ ë•Œ
        total_data = []
        for log in tqdm(data, total=len(data), desc="json to csv", mininterval=0.1):     #ì§„í–‰ ê²½ê³¼ë¥¼ ë°”ë¡œ í‘œì‹œ
            dialogueID = log['header']['dialogueInfo']['dialogueID']
            participantsInfo = log['header']['participantsInfo']
            dialogue = log['body']

            #ëŒ€í™” ì°¸ì—¬ì ì •ë³´
            participant_info = []
            for participant in participantsInfo:
                participantID = participant['participantID']
                gender = participant['gender']
                age = participant['age']
                resident = participant['residentialProvince']

                participant = [participantID, gender, age, resident]
                participant_info.append(participant)



            #ë©”ì„¸ì§€ ì •ë³´
            speaker_id = []
            speaker_text = []
            for message in dialogue: 
                text_id = message['participantID']
                speaker_id.append(text_id) 

                text = message['utterance']
                speaker_text.append(text) 

            unique_id = list(set(speaker_id)) #ê³ ìœ  speacker í™•ì¸
            unique_id.sort()

            text_by_speaker= []
            
            c = 0
            for i in unique_id:    #ë™ì¼ í™”ì ë©”ì„¸ì§€ì˜ ì¸ë±ìŠ¤ ì¶”ì¶œ
                idx = list(filter(lambda x: speaker_id[x] == i, range(len(speaker_id))))

                same_id_text = []
                for n in idx:    #ë™ì¼ í™”ì ë©”ì„¸ì§€ ë³‘í•© ë° ë¶ˆí•„ìš” íŒ¨í„´ ì œê±°
                    same_id_text.append(speaker_text[n])
                same_id_conversation = ' '.join(same_id_text)
                same_id_conversation = same_id_conversation.replace('#@ì´ë¦„#', 'User').replace('#@ê³„ì •#', 'UserID').replace('#@ì‹ ì›#', '').replace('#@ì „ë²ˆ#', '').replace('#@ì£¼ì†Œ#', '').replace('#@ë²ˆí˜¸#', '').replace('#@ì†Œì†#', '').replace('#@ê¸ˆìœµ#', '').replace('#@ì´ëª¨í‹°ì½˜#', '').replace('#@ì‹œìŠ¤í…œ#ì‚¬ì§„#', '').replace('#@ì‹œìŠ¤í…œ#ê²€ìƒ‰#', '').replace('#@ì‹œìŠ¤í…œ#ì†¡ê¸ˆ#', '').replace('#@ì‹œìŠ¤í…œ#ë™ì˜ìƒ# ', '').replace('#@ê¸°íƒ€#', '').replace('#@URL#', '')

                speaker = participant_info[c]
                
                #ê³ ìœ  í™”ìë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•œ ì…€ê°’ ì •ë ¬
                full_message_by_id = [dialogueID] + speaker + [same_id_conversation]
                total_data.append(full_message_by_id)
                c += 1

        df = pd.DataFrame(total_data, columns=['dialogueID', 'speakerID', 'sex',  'age', 'resident', 'contents'])
        
        #csvë¡œ ì €ì¥
        df.to_csv("Training_{}.csv".format(file_name.replace('.json', '')), index=False)
        print('ëŒ€í™” ì„¸íŠ¸: {0:,}ê°œ'.format(len(data)))
        print('í™”ì ë³„ ëŒ€í™”ë­‰ì¹˜: {0:,}ê°œ'.format(df.shape[0]))
        print('\n')
```

    ê°œì¸ë°ê´€ê³„.json ë¶ˆëŸ¬ì˜¤ê¸° ì™„ë£Œ(1/9)
    json to csv: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 511496/511496 [00:12<00:00, 40772.61it/s]
    ëŒ€í™” ì„¸íŠ¸: 511,496ê°œ
    í™”ì ë³„ ëŒ€í™”ë­‰ì¹˜: 1,082,221ê°œ
    
    (...ìƒëµ...)




```python
#ê²½ë¡œ ë‚´ json íŒŒì¼ ì´ë¦„ì„ ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜
file_list = glob('./í•œêµ­ì–´ SNS/Validation/*.json')

file_num = 0
load_failed = []
for file in file_list:     #ë¦¬ìŠ¤íŠ¸ì˜ json íŒŒì¼ ì„ íƒ
    file_num += 1
    file_name = file.split('\\')[-1]
    print("{} ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...".format(file_name), end = '\r')
    
    
    try:     #json íŒŒì¼ ì—´ê¸°
        with open(file, 'rt', encoding = 'UTF-8') as f:
            data = json.load(f)['data']
        print("{} ë¶ˆëŸ¬ì˜¤ê¸° ì™„ë£Œ({}/{})".format(file_name, file_num, len(file_list)))

    except:     #ë©”ëª¨ë¦¬ ë¶€ì¡±ìœ¼ë¡œ íŒŒì¼ ì—´ê¸° ì‹¤íŒ¨
        load_failed.append(file_name)
        print("{} ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨: ë©”ëª¨ë¦¬ ë¶€ì¡±\n".format(file_name))
        pass
    
    else:  #ì •ìƒì ìœ¼ë¡œ íŒŒì¼ì„ ì—´ì—ˆì„ ë•Œ
        total_data = []
        for log in tqdm(data, total=len(data), desc="json to csv", mininterval=0.1):     #ì§„í–‰ ê²½ê³¼ë¥¼ ë°”ë¡œ í‘œì‹œ
            dialogueID = log['header']['dialogueInfo']['dialogueID']
            participantsInfo = log['header']['participantsInfo']
            dialogue = log['body']

            #ëŒ€í™” ì°¸ì—¬ì ì •ë³´
            participant_info = []
            for participant in participantsInfo:
                participantID = participant['participantID']
                gender = participant['gender']
                age = participant['age']
                resident = participant['residentialProvince']

                participant = [participantID, gender, age, resident]
                participant_info.append(participant)



            #ë©”ì„¸ì§€ ì •ë³´
            speaker_id = []
            speaker_text = []
            for message in dialogue: 
                text_id = message['participantID']
                speaker_id.append(text_id) 

                text = message['utterance']
                speaker_text.append(text) 

            unique_id = list(set(speaker_id)) #ê³ ìœ  speacker í™•ì¸
            unique_id.sort()

            text_by_speaker= []
            
            c = 0
            for i in unique_id:    #ë™ì¼ í™”ì ë©”ì„¸ì§€ì˜ ì¸ë±ìŠ¤ ì¶”ì¶œ
                idx = list(filter(lambda x: speaker_id[x] == i, range(len(speaker_id))))

                same_id_text = []
                for n in idx:    #ë™ì¼ í™”ì ë©”ì„¸ì§€ ë³‘í•© ë° ë¶ˆí•„ìš” íŒ¨í„´ ì œê±°
                    same_id_text.append(speaker_text[n])
                same_id_conversation = ' '.join(same_id_text)
                same_id_conversation = same_id_conversation.replace('#@ì´ë¦„#', 'User').replace('#@ê³„ì •#', 'UserID').replace('#@ì‹ ì›#', '').replace('#@ì „ë²ˆ#', '').replace('#@ì£¼ì†Œ#', '').replace('#@ë²ˆí˜¸#', '').replace('#@ì†Œì†#', '').replace('#@ê¸ˆìœµ#', '').replace('#@ì´ëª¨í‹°ì½˜#', '').replace('#@ì‹œìŠ¤í…œ#ì‚¬ì§„#', '').replace('#@ì‹œìŠ¤í…œ#ê²€ìƒ‰#', '').replace('#@ì‹œìŠ¤í…œ#ì†¡ê¸ˆ#', '').replace('#@ì‹œìŠ¤í…œ#ë™ì˜ìƒ# ', '').replace('#@ê¸°íƒ€#', '').replace('#@URL#', '')

                speaker = participant_info[c]
                
                #ê³ ìœ  í™”ìë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•œ ì…€ê°’ ì •ë ¬
                full_message_by_id = [dialogueID] + speaker + [same_id_conversation]
                total_data.append(full_message_by_id)
                c += 1

        df = pd.DataFrame(total_data, columns=['dialogueID', 'speakerID', 'sex',  'age', 'resident', 'contents'])
        
        #csvë¡œ ì €ì¥
        df.to_csv("Validation_{}.csv".format(file_name.replace('.json', '')), index=False)
        print('ëŒ€í™” ì„¸íŠ¸: {0:,}ê°œ'.format(len(data)))
        print('í™”ì ë³„ ëŒ€í™”ë­‰ì¹˜: {0:,}ê°œ'.format(df.shape[0]))
        print('\n')
```

    ê°œì¸ë°ê´€ê³„.json ë¶ˆëŸ¬ì˜¤ê¸° ì™„ë£Œ(1/9)
    json to csv: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 63938/63938 [00:01<00:00, 42361.49it/s]
    ëŒ€í™” ì„¸íŠ¸: 63,938ê°œ
    í™”ì ë³„ ëŒ€í™”ë­‰ì¹˜: 135,428ê°œ
    
    (...ìƒëµ...)
    
    
    


```python
topic_list = ['ê°œì¸ë°ê´€ê³„', 'ë¯¸ìš©ê³¼ê±´ê°•', 'ìƒê±°ë˜(ì‡¼í•‘)', 'ì‹œì‚¬êµìœ¡', 'ì‹ìŒë£Œ', 'ì—¬ê°€ìƒí™œ', 'ì¼ê³¼ì§ì—…', 'ì£¼ê±°ì™€ìƒí™œ', 'í–‰ì‚¬']
for topic in tqdm(topic_list, total = len(topic_list), desc='ë³‘í•© ì§„í–‰ë¥ '):  
    train = pd.read_csv(f'Training_{topic}.csv')
    valid = pd.read_csv(f'Validation_{topic}.csv')
    
    train = train.astype({'contents':'str'})
    train['length'] = train['contents'].apply(lambda x: len(x))
    
    valid = valid.astype({'contents':'str'})
    valid['length'] = valid['contents'].apply(lambda x: len(x))
    
    topic_df = pd.concat([train, valid], axis= 0, ignore_index= True)
    topic_df['topic'] = topic
    topic_df = topic_df[['topic', 'sex', 'age', 'resident', 'contents', 'length']]
    topic_df.to_csv(f'./{topic}.csv', index=False)

topic_list = ['ê°œì¸ë°ê´€ê³„', 'ë¯¸ìš©ê³¼ê±´ê°•', 'ìƒê±°ë˜(ì‡¼í•‘)', 'ì‹œì‚¬êµìœ¡', 'ì‹ìŒë£Œ', 'ì—¬ê°€ìƒí™œ', 'ì¼ê³¼ì§ì—…', 'ì£¼ê±°ì™€ìƒí™œ', 'í–‰ì‚¬']

full_df = pd.DataFrame()
for topic in tqdm(topic_list, total = len(topic_list), desc='ë³‘í•© ì§„í–‰ë¥ '):  
    topic_df = pd.read_csv(f'{topic}.csv')

    full_df = pd.concat([full_df, topic_df], axis= 0, ignore_index= True)
    full_df.to_csv('SNS_FULL_Dataset(raw).csv', index=False)
```

    ë³‘í•© ì§„í–‰ë¥ : 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 9/9 [01:35<00:00, 10.61s/it]
    ë³‘í•© ì§„í–‰ë¥ : 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 9/9 [01:35<00:00, 10.61s/it]
    



```python
full_df = full_df.drop_duplicates(['sex', 'age', 'contents']) # ì¤‘ë³µëœ ë°ì´í„° ì œê±°
full_df = full_df.dropna()
full_df
```




<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>topic</th>
      <th>sex</th>
      <th>age</th>
      <th>resident</th>
      <th>contents</th>
      <th>length</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ê°œì¸ë°ê´€ê³„</td>
      <td>ì—¬ì„±</td>
      <td>20ëŒ€</td>
      <td>ê²½ê¸°ë„</td>
      <td>ë‚˜ì§€ê¸ˆë°¥ë¨¸ê±°2ì‹œê°„ê±¸ì–´ì„œ ë²ˆí™”ê°€ì°¾ì•˜ì–´..ã…œã…œ ì‰ã…œã…œ ã…ã…ã…ã…ì˜¤ì¢‹ê² ë„¤ ã…‹ã„±ã…‹ã„±ã„±ã„±ã„±ì•„ë‹ˆ...</td>
      <td>127</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ê°œì¸ë°ê´€ê³„</td>
      <td>ë‚¨ì„±</td>
      <td>20ëŒ€</td>
      <td>ê²½ê¸°ë„</td>
      <td>í— ã… ã…  ì–¸ë„í˜¸í…”ë“¤ê°€ã… ã…  ì—„ì²­í”¼ê±´í• ì²¸ë° ë‚˜ëŠ”ì¸ë‚«ëŸ¬ìš” ë‚˜ ë‘ì‹œì¶œê·¼ì´ë‹¤ã…ã…ã…ã… í€µìœ¼ë¡œí•œ...</td>
      <td>130</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ê°œì¸ë°ê´€ê³„</td>
      <td>ì—¬ì„±</td>
      <td>20ëŒ€</td>
      <td>ê²½ê¸°ë„</td>
      <td>í•™ìƒì´ë©´ì¢‹êµ¬! ì™œí˜¼ìë‹¤ë‹ˆëƒê³ ì˜¤..... ì™€ ë‚´ì¹œêµ°í•™êµë‚˜ê° ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ ê·¸ë¥´ë„¤ ...</td>
      <td>56</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ê°œì¸ë°ê´€ê³„</td>
      <td>ë‚¨ì„±</td>
      <td>20ëŒ€</td>
      <td>ê²½ê¸°ë„</td>
      <td>í›” í•™ìƒ ì—†ëŠ”ë°...ì£¼ë³€ì—... ì•„ë‹ˆ ë³µí•™í•˜ê³  í•™êµë¥¼ ëª»ê°€ëŠ”ë° ì–´ì¼€ ì¹œêµ¬ê°€ìˆëƒ.. ...</td>
      <td>74</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ê°œì¸ë°ê´€ê³„</td>
      <td>ì—¬ì„±</td>
      <td>30ëŒ€</td>
      <td>ì¶©ì²­ë¶ë„</td>
      <td>ì°¸ë‚˜ ë‚´ê°€ë­ì–¼ë§ˆë‚˜ê·¸ë¬ë‹¤ê³  ì›ƒê¸°ëŠ”ì‚¬ëŒì´ì•¼ì§€ì§œ ë„ˆë¬´í™”ë‚œë‹¹.. ê·¼ë°ì˜¤ë¹ ëŠ”ë§ì„ë˜ ì˜í•´ì„œ ë‚´...</td>
      <td>146</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>3844725</th>
      <td>í–‰ì‚¬</td>
      <td>ì—¬ì„±</td>
      <td>20ëŒ€</td>
      <td>ì„œìš¸íŠ¹ë³„ì‹œ</td>
      <td>ë§ì•œã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ í•˜ë£¨ë¡œ ë˜ëƒê³¸ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹...</td>
      <td>57</td>
    </tr>
    <tr>
      <th>3844726</th>
      <td>í–‰ì‚¬</td>
      <td>ì—¬ì„±</td>
      <td>30ëŒ€</td>
      <td>ê²½ê¸°ë„</td>
      <td>ë‹¤ìŒë‚ ì€ ì¼ì–´ë‚˜ì„œ ê·¼ì²˜ ë˜ ìœ ëª…ë¹µì§‘ ê°€ì„œ ì ì‹¬ì„ ë¨¹ê³  ì§‘ìœ¼ë¡œ ë³µê·€! ì–´ì œ ì ì‹¬ë¨¹ì„ê³³...</td>
      <td>61</td>
    </tr>
    <tr>
      <th>3844727</th>
      <td>í–‰ì‚¬</td>
      <td>ë‚¨ì„±</td>
      <td>20ëŒ€</td>
      <td>ì¸ì²œê´‘ì—­ì‹œ</td>
      <td>ì§‘ì„ ê°€ëŠ”êµ°ì—¬! ì•„ì£¼ìš°!!!!! ì¢‹ìŠµë„¤ë‹¤ User!!!! ì•„ì£¼ì¢‹ì•„ìš”! ë‹¤ìŒì£¼ì•¼ ì–´ì°¨í”¼!</td>
      <td>48</td>
    </tr>
    <tr>
      <th>3844728</th>
      <td>í–‰ì‚¬</td>
      <td>ì—¬ì„±</td>
      <td>20ëŒ€</td>
      <td>ì„œìš¸íŠ¹ë³„ì‹œ</td>
      <td>ê·¼ë° ë™ì°½íšŒ ì¸ë¬¸ê³„ê¹Œì§€ ì‹¹ ë‹¤ í•˜ë ¤ë©´ ì ˆëŒ€ ëª»í•´.. ì§„ì§œ ë§ìƒë§Œ ê°€ëŠ¥ ê·¸ê±° ìˆ˜ìš©í•´ì¤„...</td>
      <td>121</td>
    </tr>
    <tr>
      <th>3844729</th>
      <td>í–‰ì‚¬</td>
      <td>ì—¬ì„±</td>
      <td>20ëŒ€</td>
      <td>ì„œìš¸íŠ¹ë³„ì‹œ</td>
      <td>ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã… ã… ì—‰ì—‰ ëœë‹¤ê³  í•´ì£¼ì„¸ìš” ê·¸ë‹ˆê¹Œ ë§ìƒ ë™ì°½íšŒ ê·¸ì •ë„ë©´ ì—°íšŒì¥ ë¹Œë ¤ì•¼í•¨ ...</td>
      <td>130</td>
    </tr>
  </tbody>
</table>
<p>3835493 rows Ã— 6 columns</p>
</div>
<br><br>

## ê¸°ì´ˆ íƒìƒ‰
- ë¬¸ì¥ ê¸¸ì´, feautre ë³„ ë¶„í¬ í™•ì¸



```python
# ë¬¸ì¥ ê¸¸ì´ í™•ì¸ ë° ì´ìƒì¹˜ ì œê±°
matplotlib.rcParams['font.family'] ='Malgun Gothic'
matplotlib.rcParams['axes.unicode_minus'] =False

plt.figure(figsize=(5,3))
plt.rc('font', size=20)

print('í‰ê· ', full_df['length'].mean())
print('ìƒìœ„5%', full_df['length'].quantile(0.05))
print('í•˜ìœ„5%', full_df['length'].quantile(0.95))

sns.histplot(full_df['length'])
plt.show()
```

    í‰ê·  80.99197912758542
    ìƒìœ„5% 21.0
    í•˜ìœ„5% 173.0

    


    
![png](../image/output_8_2.png)
    



```python
length_df = full_df.loc[full_df['length'] >=20] 
length_df = length_df.loc[length_df['length'] <=200] 
```




```python
# featureëŠ” ë‹¤ë¥´ì§€ë§Œ ë™ì¼í•œí•œ ë©”ì‹œì§€ í™•ì¸
dup_df = length_df[length_df['contents'].duplicated(keep=False)].sort_values('contents')
dup_df
```




<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>topic</th>
      <th>sex</th>
      <th>age</th>
      <th>resident</th>
      <th>contents</th>
      <th>length</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1853440</th>
      <td>ì‹œì‚¬êµìœ¡</td>
      <td>ì—¬ì„±</td>
      <td>20ëŒ€ ë¯¸ë§Œ</td>
      <td>ì¸ì²œê´‘ì—­ì‹œ</td>
      <td>ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹</td>
      <td>25</td>
    </tr>
    <tr>
      <th>2307313</th>
      <td>ì—¬ê°€ìƒí™œ</td>
      <td>ì—¬ì„±</td>
      <td>30ëŒ€</td>
      <td>ì„œìš¸íŠ¹ë³„ì‹œ</td>
      <td>ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹</td>
      <td>25</td>
    </tr>
    <tr>
      <th>153266</th>
      <td>ê°œì¸ë°ê´€ê³„</td>
      <td>ì—¬ì„±</td>
      <td>30ëŒ€</td>
      <td>ê²½ê¸°ë„</td>
      <td>ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹</td>
      <td>20</td>
    </tr>
    <tr>
      <th>136342</th>
      <td>ê°œì¸ë°ê´€ê³„</td>
      <td>ì—¬ì„±</td>
      <td>20ëŒ€</td>
      <td>ì¶©ì²­ë‚¨ë„</td>
      <td>ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹</td>
      <td>20</td>
    </tr>
    <tr>
      <th>2073386</th>
      <td>ì‹ìŒë£Œ</td>
      <td>ë‚¨ì„±</td>
      <td>20ëŒ€</td>
      <td>ì¶©ì²­ë¶ë„</td>
      <td>ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹</td>
      <td>20</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1107375</th>
      <td>ê°œì¸ë°ê´€ê³„</td>
      <td>ì—¬ì„±</td>
      <td>20ëŒ€</td>
      <td>ì„œìš¸íŠ¹ë³„ì‹œ</td>
      <td>ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹</td>
      <td>49</td>
    </tr>
    <tr>
      <th>2425483</th>
      <td>ì—¬ê°€ìƒí™œ</td>
      <td>ì—¬ì„±</td>
      <td>30ëŒ€</td>
      <td>ì„œìš¸íŠ¹ë³„ì‹œ</td>
      <td>ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹...</td>
      <td>96</td>
    </tr>
    <tr>
      <th>1527440</th>
      <td>ìƒê±°ë˜(ì‡¼í•‘)</td>
      <td>ì—¬ì„±</td>
      <td>20ëŒ€</td>
      <td>ì„œìš¸íŠ¹ë³„ì‹œ</td>
      <td>ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹...</td>
      <td>96</td>
    </tr>
    <tr>
      <th>670683</th>
      <td>ê°œì¸ë°ê´€ê³„</td>
      <td>ë‚¨ì„±</td>
      <td>30ëŒ€</td>
      <td>ê²½ê¸°ë„</td>
      <td>ì•„ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹</td>
      <td>21</td>
    </tr>
    <tr>
      <th>70518</th>
      <td>ê°œì¸ë°ê´€ê³„</td>
      <td>ì—¬ì„±</td>
      <td>20ëŒ€</td>
      <td>ê²½ê¸°ë„</td>
      <td>ì•„ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹</td>
      <td>21</td>
    </tr>
  </tbody>
</table>
<p>75 rows Ã— 6 columns</p>
</div>




```python
dup_df.to_excel('ì¤‘ë³µ ë©”ì„¸ì§€ ìœ í˜• í™•ì¸.xlsx', index=False)
```

    


```python
# feature ë³„ ë¶„í¬ í™•ì¸
m_df = df.loc[df['sex'] == 'ë‚¨ì„±']
f_df = df.loc[df['sex'] == 'ì—¬ì„±']

a10_df = df.loc[df['age'] == '20ëŒ€ ë¯¸ë§Œ']
a20_df = df.loc[df['age'] == '20ëŒ€']
a30_df = df.loc[df['age'] == '30ëŒ€']
a40_df = df.loc[df['age'] == '40ëŒ€']
a50_df = df.loc[df['age'] == '50ëŒ€']
a60_df = df.loc[df['age'] == '60ëŒ€']
a70_df = df.loc[df['age'] == '70ëŒ€ ì´ìƒ']

values = [total, male, female, a10, a20, a30, a40, a50, a60, a70]
labels = ['total', 'male', 'female', 'age10', 'age20', 'age30', 'age40', 'age50', 'age60', 'age70']

plt.figure(figsize = (20, 10))
plt.grid(True, axis = 'y')
bar = plt.bar(labels, values, color='lightgray')
plt.rcParams['font.size'] = 20
plt.ylim(0, 4000000)

for rect in bar:
    height = rect.get_height()
    plt.text(rect.get_x() + rect.get_width()/2.0, height, f'{height:,}\n({height/total*100:.2f}%)', ha='center', va='bottom', size = 15)

plt.show()
```


    
![png](output_4_0.png)
    



- targetì— í•´ë‹¹í•˜ëŠ” featureì˜ ë¶„í¬ê°€ ë§¤ìš° ì–¸ë°¸ëŸ°ìŠ¤í•¨ â‡’ ìŠ¤ìºì¼ë§ ê³ ë ¤




```python
# topic value ë¶„í¬ í™•ì¸
import scipy.stats as st

topic_list = ['ê°œì¸ë°ê´€ê³„', 'ë¯¸ìš©ê³¼ê±´ê°•', 'ìƒê±°ë˜(ì‡¼í•‘)', 'ì‹œì‚¬êµìœ¡', 'ì‹ìŒë£Œ', 'ì—¬ê°€ìƒí™œ', 'ì¼ê³¼ì§ì—…', 'ì£¼ê±°ì™€ìƒí™œ', 'í–‰ì‚¬']

rows = []
for topic in tqdm(topic_list, total = len(topic_list)):  
    df_t = df.loc[df['topic'] == f'{topic}']
    file = topic
    total = len(df_t)
    length99 = st.t.interval(0.99, len(df_t['length'])-1, loc=np.mean(df_t['length']), scale=st.sem(df_t['length']))[1]
    male = len(df_t.loc[df_t['sex']== 'ë‚¨ì„±'])
    female = len(df_t.loc[df_t['sex']== 'ì—¬ì„±'])
    a10 = len(df_t.loc[df_t['age']== '20ëŒ€ ë¯¸ë§Œ'])
    a20 = len(df_t.loc[df_t['age']== '20ëŒ€'])
    a30 = len(df_t.loc[df_t['age']== '30ëŒ€'])
    a40 = len(df_t.loc[df_t['age']== '40ëŒ€'])
    a50 = len(df_t.loc[df_t['age']== '50ëŒ€'])
    a60 = len(df_t.loc[df_t['age']== '60ëŒ€'])
    a70 = len(df_t.loc[df_t['age']== '70ëŒ€ ì´ìƒ'])
    
    row = [file, total, length99, male, female, a10, a20, a30, a40, a50, a60, a70]
    rows.append(row)

    
cols = ['topic', 'total', 'length99', 'male', 'female', 'age10', 'age20', 'age30', 'age40', 'age50', 'age60', 'age70'] 
balance_df = pd.DataFrame(rows, columns=cols)
balance_df
```

    100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 9/9 [00:05<00:00,  1.57it/s]
    




<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>topic</th>
      <th>total</th>
      <th>length99</th>
      <th>male</th>
      <th>female</th>
      <th>age10</th>
      <th>age20</th>
      <th>age30</th>
      <th>age40</th>
      <th>age50</th>
      <th>age60</th>
      <th>age70</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ê°œì¸ë°ê´€ê³„</td>
      <td>1134029</td>
      <td>77.974638</td>
      <td>292596</td>
      <td>841433</td>
      <td>41984</td>
      <td>859833</td>
      <td>200145</td>
      <td>18890</td>
      <td>10168</td>
      <td>2834</td>
      <td>175</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ë¯¸ìš©ê³¼ê±´ê°•</td>
      <td>221514</td>
      <td>78.514982</td>
      <td>40737</td>
      <td>180777</td>
      <td>4715</td>
      <td>160611</td>
      <td>47958</td>
      <td>3893</td>
      <td>3510</td>
      <td>766</td>
      <td>61</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ìƒê±°ë˜(ì‡¼í•‘)</td>
      <td>255671</td>
      <td>78.690426</td>
      <td>43766</td>
      <td>211905</td>
      <td>3983</td>
      <td>179996</td>
      <td>59764</td>
      <td>6383</td>
      <td>4476</td>
      <td>1001</td>
      <td>68</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ì‹œì‚¬êµìœ¡</td>
      <td>198409</td>
      <td>83.080023</td>
      <td>47544</td>
      <td>150865</td>
      <td>14134</td>
      <td>154678</td>
      <td>24230</td>
      <td>2710</td>
      <td>1697</td>
      <td>895</td>
      <td>65</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ì‹ìŒë£Œ</td>
      <td>329375</td>
      <td>74.298464</td>
      <td>66110</td>
      <td>263265</td>
      <td>5480</td>
      <td>238580</td>
      <td>71768</td>
      <td>5979</td>
      <td>6623</td>
      <td>886</td>
      <td>59</td>
    </tr>
    <tr>
      <th>5</th>
      <td>ì—¬ê°€ìƒí™œ</td>
      <td>431670</td>
      <td>78.421059</td>
      <td>84485</td>
      <td>347185</td>
      <td>11821</td>
      <td>334418</td>
      <td>77398</td>
      <td>3114</td>
      <td>2955</td>
      <td>1910</td>
      <td>54</td>
    </tr>
    <tr>
      <th>6</th>
      <td>ì¼ê³¼ì§ì—…</td>
      <td>236247</td>
      <td>85.073682</td>
      <td>46887</td>
      <td>189360</td>
      <td>2953</td>
      <td>173194</td>
      <td>53600</td>
      <td>4030</td>
      <td>1611</td>
      <td>748</td>
      <td>111</td>
    </tr>
    <tr>
      <th>7</th>
      <td>ì£¼ê±°ì™€ìƒí™œ</td>
      <td>438561</td>
      <td>78.515856</td>
      <td>97589</td>
      <td>340972</td>
      <td>8408</td>
      <td>300678</td>
      <td>107526</td>
      <td>11770</td>
      <td>7772</td>
      <td>2235</td>
      <td>172</td>
    </tr>
    <tr>
      <th>8</th>
      <td>í–‰ì‚¬</td>
      <td>318566</td>
      <td>77.673101</td>
      <td>73144</td>
      <td>245422</td>
      <td>9229</td>
      <td>231402</td>
      <td>64480</td>
      <td>8802</td>
      <td>3915</td>
      <td>623</td>
      <td>115</td>
    </tr>
  </tbody>
</table>
</div>




```python
from matplotlib import gridspec

w = 0.1
nrow = 9# í–‰ì˜ ê°¯ìˆ˜
idx = np.arange(nrow)

a10 = balance_df['age10']
a20 = balance_df['age20']
a30 = balance_df['age30']
a40 = balance_df['age40']
a50 = balance_df['age50']
a60 = balance_df['age60']
a70 = balance_df['age70']

fig = plt.figure(figsize=(20, 10)) 
gs = gridspec.GridSpec(nrows=2, 
                       ncols=1, 
                       height_ratios=[3,2], 
                       width_ratios=[10])

ax1 = plt.subplot(gs[0])
ax1.bar(idx - w*3, a10, width = w)
ax1.bar(idx - w*2, a20, width = w)
ax1.bar(idx - w, a30, width = w)
ax1.bar(idx, a40, width = w)
ax1.bar(idx + w, a50, width = w)
ax1.bar(idx + w*2, a60, width = w)
ax1.bar(idx + w*3, a70, width = w)


ax2 = plt.subplot(gs[1])
ax2.bar(idx - w*3, a10, width = w)
ax2.bar(idx - w*2, a20, width = w)
ax2.bar(idx - w, a30, width = w)
ax2.bar(idx, a40, width = w)
ax2.bar(idx + w, a50, width = w)
ax2.bar(idx + w*2, a60, width = w)
ax2.bar(idx + w*3, a70, width = w)


ax1.yaxis.grid()
ax2.yaxis.grid()

ax1.set_ylim(10000, 1000000)
ax1.set_yticks([10000, 100000, 200000, 300000, 400000, 1000000])
ax1.set_ylabel("")
ax1.spines['bottom'].set_visible(False)
ax1.get_xaxis().set_visible(False)
ax1.set_xlabel("")
ax1.legend(balance_df.columns[-7:], ncol = 7) 

ax2.set_ylim(0, 10000)
ax2.set_yticks([1000, 2000, 4000, 6000, 8000, 10000])
ax2.set_ylabel("")
ax2.spines['top'].set_visible(False)

d = .7    
kwargs = dict(marker=[(-1, -d), (1, d)], markersize=15, linestyle="none", color='k', clip_on=False)
ax1.plot([0, 1], [0, 0], transform=ax1.transAxes, **kwargs)
ax2.plot([0, 1], [1, 1], transform=ax2.transAxes, **kwargs)

plt.xticks(idx, topic_list, rotation = 0)
plt.show()
```


    
![png](output_6_0.png)




- topic ê°’ì— ëŒ€í•œ ë¶„í¬ëŠ” ìƒë‹¹íˆ ì–¸ë°¸ëŸ°ìŠ¤í•¨
- ì¼ìƒì ì¸ ì¹´í†¡ëŒ€í™”ì—ì„œ ë°œí™”ë˜ëŠ” ì£¼ì œë³„ ë¹„ìœ¨ê³¼ ë¹„ìŠ·í•  ê²ƒìœ¼ë¡œ ë³´ì—¬ì§




## ë°ì´í„° ìœ¡ì•ˆ ìŠ¤í¬ë¦¬ë‹ 
- ë™ì¼í•œ ì–´ê°„/ì˜ë¯¸ë¥¼ ê°–ì§€ë§Œ ì–´ë¯¸, ì¤„ì„ë§, ì˜¤íƒ€ ë“±ìœ¼ë¡œ ë³€í˜•ëœ í‘œí˜„ì´ ë§¤ìš° ë§ì€ ê²ƒìœ¼ë¡œ ë³´ì—¬ì§
- ììŒ ë˜ëŠ” ëª¨ìŒìœ¼ë¡œ êµ¬ì„±ëœ ë¶ˆì™„ì „ í‘œí˜„(Korean Particle), ë¬¸ì¥ê¸°í˜¸, íŠ¹ìˆ˜ê¸°í˜¸, ì´ëª¨ì§€ í‘œí˜„ì´ ëŒ€ë¶€ë¶„ ì‚¬ìš©ë¨
    - ììŒ ë˜ëŠ” ëª¨ìŒìœ¼ë¡œ êµ¬ì„±ëœ ë¶ˆì™„ì „ í‘œí˜„: ã…‹ã…‹ã…‹ã…‹, ã… ã… , ã„¹ã…‡, ã…‹ã…‘ã…‹ã…‘ã…‹ã…‘ ë“±
    - ë¬¸ì¥ê¸°í˜¸ ë° íŠ¹ìˆ˜ê¸°í˜¸: . , ; $ ^^ ^-^ ë“±
    - ì´ëª¨ì§€: ğŸ¤£, ğŸ‘, ğŸ™ ë“±
- topic valueì— ëŒ€í•œ ë¶„ë¥˜ê¸°ì¤€ì´ ì ì ˆí•˜ì§€ ì•Šì€ ê²ƒìœ¼ë¡œ ë³´ì—¬ topicì€ featureë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒìœ¼ë¡œ í•¨




```python
raw_df.to_csv('SNS_FULL_Dataset(raw_ì¤‘ë³µëœ ë©”ì„¸ì§€ ì œê±°).csv', index=False)
```
